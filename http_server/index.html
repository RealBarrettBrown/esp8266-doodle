<!DOCTYPE html>
<html lang='en'>

<head>
  <meta charset='UTF-8' />
  <title>Magic comes from the stars</title>
  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous"> -->
</head>

<body>
  <input onclick="gpioPin1(this)" type="checkbox" name="gpio1" value="pin 1"> Pin 1
  <br>
  <input onclick="gpioPin2(this)" type="checkbox" name="gpio2" value="pin 2"> Pin 2
  <br>
  <button onclick="getTemp()">Get Temperature</button>

  <div id="temperature" style="background-color:grey;color:white;padding:20px;width:300px">
  </div>

  <script>
    function postPin(pin, state) {
      var url = "gpio?pin=" + pin + "&state=" + state * 1;
      var xhr = new XMLHttpRequest();
      xhr.open("POST", url, true);
      xhr.send();
    }

    function gpioPin1(box) {
      postPin(1, box.checked);
    }

    function gpioPin2(box) {
      postPin(2, box.checked);
    }

    function getTemp() {
      var url = "adc";
      var xhr = new XMLHttpRequest();
      xhr.open("GET", url, true);
      xhr.addEventListener("load", function() {
        var serverResponse = xhr.responseText;
        document.getElementById("temperature").innerHTML = serverResponse;
        console.log(serverResponse);
      });
      xhr.send();
    }
  </script>

</body>

</html>
